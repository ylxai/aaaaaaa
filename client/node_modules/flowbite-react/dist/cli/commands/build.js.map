{"version":3,"file":"build.js","sources":["../../../src/cli/commands/build.ts"],"sourcesContent":["import fs from \"fs/promises\";\nimport { allowedExtensions, automaticClassGenerationMessage, classListFilePath, excludeDirs } from \"../consts\";\nimport { buildClassList } from \"../utils/build-class-list\";\nimport { extractComponentImports } from \"../utils/extract-component-imports\";\nimport { findFiles } from \"../utils/find-files\";\nimport { getConfig } from \"../utils/get-config\";\nimport { setupInit } from \"./setup-init\";\nimport { setupOutputDirectory } from \"./setup-output-directory\";\n\nexport async function build() {\n  await setupOutputDirectory();\n\n  try {\n    const config = await getConfig();\n    await setupInit(config);\n\n    const importedComponents: string[] = [];\n\n    if (config.components.length) {\n      console.warn(automaticClassGenerationMessage);\n    } else {\n      const files = await findFiles({\n        patterns: allowedExtensions.map((ext) => `**/*${ext}`),\n        excludeDirs,\n      });\n\n      for (const file of files) {\n        const content = await fs.readFile(file, \"utf-8\");\n        const components = extractComponentImports(content);\n\n        if (components.length) {\n          importedComponents.push(...components);\n        }\n      }\n    }\n\n    const classList = buildClassList({\n      components: config.components.length ? config.components : [...new Set(importedComponents)],\n      dark: config.dark,\n      prefix: config.prefix,\n      version: config.version,\n    });\n\n    console.log(`Generating ${classListFilePath} file...`);\n    await fs.writeFile(classListFilePath, JSON.stringify(classList, null, 2));\n  } catch (error) {\n    console.error(`Failed to generate ${classListFilePath}:`, error);\n  }\n}\n"],"names":["fs"],"mappings":";;;;;;;;;AASO,eAAe,KAAK,GAAG;AAC9B,EAAE,MAAM,oBAAoB,EAAE;AAC9B,EAAE,IAAI;AACN,IAAI,MAAM,MAAM,GAAG,MAAM,SAAS,EAAE;AACpC,IAAI,MAAM,SAAS,CAAC,MAAM,CAAC;AAC3B,IAAI,MAAM,kBAAkB,GAAG,EAAE;AACjC,IAAI,IAAI,MAAM,CAAC,UAAU,CAAC,MAAM,EAAE;AAClC,MAAM,OAAO,CAAC,IAAI,CAAC,+BAA+B,CAAC;AACnD,KAAK,MAAM;AACX,MAAM,MAAM,KAAK,GAAG,MAAM,SAAS,CAAC;AACpC,QAAQ,QAAQ,EAAE,iBAAiB,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;AAC9D,QAAQ;AACR,OAAO,CAAC;AACR,MAAM,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;AAChC,QAAQ,MAAM,OAAO,GAAG,MAAMA,WAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC;AACxD,QAAQ,MAAM,UAAU,GAAG,uBAAuB,CAAC,OAAO,CAAC;AAC3D,QAAQ,IAAI,UAAU,CAAC,MAAM,EAAE;AAC/B,UAAU,kBAAkB,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC;AAChD;AACA;AACA;AACA,IAAI,MAAM,SAAS,GAAG,cAAc,CAAC;AACrC,MAAM,UAAU,EAAE,MAAM,CAAC,UAAU,CAAC,MAAM,GAAG,MAAM,CAAC,UAAU,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,kBAAkB,CAAC,CAAC;AACjG,MAAM,IAAI,EAAE,MAAM,CAAC,IAAI;AACvB,MAAM,MAAM,EAAE,MAAM,CAAC,MAAM;AAC3B,MAAM,OAAO,EAAE,MAAM,CAAC;AACtB,KAAK,CAAC;AACN,IAAI,OAAO,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,iBAAiB,CAAC,QAAQ,CAAC,CAAC;AAC1D,IAAI,MAAMA,WAAE,CAAC,SAAS,CAAC,iBAAiB,EAAE,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AAC7E,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,mBAAmB,EAAE,iBAAiB,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;AACpE;AACA;;;;"}